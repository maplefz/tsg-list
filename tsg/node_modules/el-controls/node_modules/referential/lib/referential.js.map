{"version":3,"file":"referential.js","sources":["../node_modules/es-tostring/index.mjs","../node_modules/es-is/src/number.coffee","../node_modules/es-is/src/object.coffee","../node_modules/es-object-assign/src/index.coffee","../node_modules/riot-observable/dist/es6.observable.js","../src/ref.coffee","../src/index.coffee"],"sourcesContent":["export default function(obj) {\n  return Object.prototype.toString.call(obj)\n}\n","import toString from 'es-tostring'\n\n# Test if `value` is a number.\n#\n# @param {Mixed} value value to test\n# @return {Boolean} true if `value` is a number, false otherwise\n# @api public\nexport default isNumber = (value) ->\n  toString(value) == '[object Number]'\n","import toString from 'es-tostring'\n\n# Test if `value` is an object.\n#\n# @param {Mixed} value value to test\n# @return {Boolean} true if `value` is an object, false otherwise\n# @api public\nexport default isObject = (value) ->\n  toString(value) == '[object Object]'\n","getOwnSymbols = Object.getOwnPropertySymbols\n\ntoObject = (val) ->\n  if val == null or val == undefined\n    throw new TypeError('Object.assign cannot be called with null or undefined')\n  Object val\n\nshouldUseNative = ->\n  try\n    return false unless Object.assign\n\n    # Detect buggy property enumeration order in older V8 versions.\n\n    # https://bugs.chromium.org/p/v8/issues/detail?id=4118\n    test1 = new String('abc')\n    test1[5] = 'de'\n    return false if Object.getOwnPropertyNames(test1)[0] == '5'\n\n    # https://bugs.chromium.org/p/v8/issues/detail?id=3056\n    test2 = {}\n    for i in [0..9]\n      test2['_' + String.fromCharCode(i)] = i\n    order2 = Object.getOwnPropertyNames(test2).map (n) -> test2[n]\n    return false if order2.join('') != '0123456789'\n\n    # https://bugs.chromium.org/p/v8/issues/detail?id=3056\n    test3 = {}\n    for letter in 'abcdefghijklmnopqrst'.split('')\n      test3[letter] = letter\n    if Object.keys(Object.assign({}, test3)).join('') != 'abcdefghijklmnopqrst'\n      return false\n    true\n  catch err\n    # We don't expect any of the above to throw, but better to be safe.\n    false\n\nexport default objectAssign = do ->\n  return Object.assign if shouldUseNative()\n\n  (target, sources...) ->\n    to = toObject target\n\n    for source in sources\n      from = Object(source)\n      for key of from\n        if Object::hasOwnProperty.call(from, key)\n          to[key] = from[key]\n      if getOwnSymbols\n        for symbol in getOwnSymbols(from)\n          if Object::propIsEnumerable.call from, symbol\n            to[symbol] = from[symbol]\n    to\n","var observable = function(el) {\n\n  /**\n   * Extend the original object or create a new empty one\n   * @type { Object }\n   */\n\n  el = el || {}\n\n  /**\n   * Private variables\n   */\n  var callbacks = {},\n    slice = Array.prototype.slice\n\n  /**\n   * Public Api\n   */\n\n  // extend the el object adding the observable methods\n  Object.defineProperties(el, {\n    /**\n     * Listen to the given `event` ands\n     * execute the `callback` each time an event is triggered.\n     * @param  { String } event - event id\n     * @param  { Function } fn - callback function\n     * @returns { Object } el\n     */\n    on: {\n      value: function(event, fn) {\n        if (typeof fn == 'function')\n          (callbacks[event] = callbacks[event] || []).push(fn)\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Removes the given `event` listeners\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    off: {\n      value: function(event, fn) {\n        if (event == '*' && !fn) callbacks = {}\n        else {\n          if (fn) {\n            var arr = callbacks[event]\n            for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n              if (cb == fn) arr.splice(i--, 1)\n            }\n          } else delete callbacks[event]\n        }\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Listen to the given `event` and\n     * execute the `callback` at most once\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    one: {\n      value: function(event, fn) {\n        function on() {\n          el.off(event, on)\n          fn.apply(el, arguments)\n        }\n        return el.on(event, on)\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Execute all callback functions that listen to\n     * the given `event`\n     * @param   { String } event - event id\n     * @returns { Object } el\n     */\n    trigger: {\n      value: function(event) {\n\n        // getting the arguments\n        var arglen = arguments.length - 1,\n          args = new Array(arglen),\n          fns,\n          fn,\n          i\n\n        for (i = 0; i < arglen; i++) {\n          args[i] = arguments[i + 1] // skip first argument\n        }\n\n        fns = slice.call(callbacks[event] || [], 0)\n\n        for (i = 0; fn = fns[i]; ++i) {\n          fn.apply(el, args)\n        }\n\n        if (callbacks['*'] && event != '*')\n          el.trigger.apply(el, ['*', event].concat(args))\n\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    }\n  })\n\n  return el\n\n}\nexport default observable\n","import isNumber     from 'es-is/number'\nimport isObject     from 'es-is/object'\nimport objectAssign from 'es-object-assign'\nimport observable   from 'riot-observable'\n\nnextId = do ->\n  ids = 0\n  -> ids++\n\nexport default class Ref\n  constructor: (@_value, @parent, @key) ->\n    @_cache    = {}\n    @_children = {}\n    @_numChildren = 0\n    @_id       = nextId()\n\n    if @parent?\n      @parent._children[@_id] = @\n      @parent._numChildren++\n    observable @\n    @\n\n  # Clear the cache\n  _mutate: (key) ->\n    # TODO: do something smarter with key rather than wiping out entire cache\n    @_cache = {}\n\n    # clear children as well\n    child._mutate() for id, child of @_children\n\n    @\n\n  # clear everything\n  clear: ()->\n    @_cache = {}\n\n    child.clear() for id, child of @_children\n    @_children = {}\n    @_numChildren = 0\n\n    #clear out the values\n    @_value = undefined\n\n    if @parent?\n      @parent.set @key, undefined\n\n  # Removes reference\n  destroy: () ->\n    child.destroy() for id, child of @_children\n    delete @_cache\n    delete @_children\n    @off '*'\n\n    if @parent\n      delete @parent._children[@_id]\n      @parent._numChildren--\n    @\n\n  # Get value of this or parent Ref\n  value: (state) ->\n    unless @parent\n      if state?\n        @_value = state\n      return @_value\n\n    if state?\n      @parent.set @key, state\n    else\n      @parent.get @key\n\n  # Get a ref to this or subtree\n  ref: (key) ->\n    unless key\n      return @\n\n    new Ref null, @, key\n\n  # Get state or subtree\n  get: (key) ->\n    unless key\n      @value()\n    else\n      return @_cache[key] if @_cache[key]\n      @_cache[key] = @index key\n\n  # Set value overwriting tree along way\n  set: (key, value) ->\n    # handle case of object\n    if isObject key\n      for k, v of key\n        @set k, v\n\n      return @\n\n    oldValue = @get key\n\n    @_mutate key\n\n    unless value?\n      # avoid strings/nulls etc being thrown into object assign\n      if isObject key\n        @value objectAssign @value(), key\n      # fall back to standard assignment by setting key to ull/undefined\n      else\n        @index key, value, false\n    else\n      @index key, value, false\n\n    # set event\n    @_triggerSet key, value, oldValue\n    @_triggerSetChildren key, value, oldValue\n    @\n\n  _triggerSetChildren: (key, value, oldValue) ->\n    return @ if @_numChildren == 0\n    key = key + ''\n    keyParts = key.split '.'\n    partialKey = ''\n    childKeys = []\n    regExps = {}\n\n    for i, keyPart of keyParts\n      if partialKey == ''\n        partialKey = keyPart\n      else\n        partialKey += '.' + keyPart\n      childKeys[i] = partialKey\n\n      regExps[partialKey] = new RegExp '^' + partialKey + '\\.?'\n\n    for id, child of @_children\n      if child.key in childKeys\n        childRemainderKey = key.replace regExps[child.key], ''\n        child.trigger 'set', childRemainderKey, value, oldValue\n        child._triggerSetChildren childRemainderKey, value, oldValue\n\n  _triggerSet: (key, value, oldValue) ->\n    @trigger 'set', key, value, oldValue\n    if @parent\n      parentKey = @key + '.' + key\n      @parent._triggerSet parentKey, value, oldValue\n\n  # Deep set some value\n  extend: (key, value) ->\n    @_mutate key\n\n    unless value?\n      @value objectAssign @value(), key\n    else\n      if isObject value\n        @value objectAssign (@ref key).get(), value\n      else\n        clone = @clone()\n        @set key, value\n        @value objectAssign clone.get(), @value()\n    @\n\n  clone: (key) ->\n    new Ref objectAssign {}, @get key\n\n  # Walk tree using key, optionally update value\n  index: (key, value, get=true, obj=@value()) ->\n    if @parent\n      return @parent.index @key + '.' + key, value, get\n\n    if isNumber key\n      key = String key\n\n    props = key.split '.'\n\n    if get\n      # Get is simple, doesn't need to create properties as it goes\n      while prop = props.shift()\n        unless props.length\n          return obj?[prop]\n        obj = obj?[prop]\n      return\n\n    if !@_value?\n      @_value = {}\n      if !obj?\n        obj = @_value\n\n    # Set version creates tree if necessary\n    while prop = props.shift()\n      unless props.length\n        return obj[prop] = value\n      else\n        next = props[0]\n        unless obj[prop]?\n          if isNaN Number next\n            obj[prop] ?= {}\n          else\n            obj[prop] ?= []\n      obj = obj[prop]\n    return\n","import Ref from './ref'\n\nmethods = [\n  'extend'\n  'get'\n  'index'\n  'ref'\n  'set'\n  'value'\n  'clear'\n  'destroy'\n\n  'on'\n  'off'\n  'one'\n  'trigger'\n]\n\nrefer = (state, ref=null) ->\n  ref ?= new Ref state\n\n  wrapper = (key) -> ref.get key\n\n  for method in methods\n    do (method) ->\n      wrapper[method] = ->\n        ref[method].apply ref, arguments\n\n  wrapper.refer = (key) -> refer null, ref.ref key\n  wrapper.clone = (key) -> refer null, ref.clone key\n  wrapper\n\nrefer.Ref = Ref\n\nexport default refer\n"],"names":["isObject","objectAssign","isNumber","Ref"],"mappings":";;;AAAA,eAAe,SAAS,GAAG,EAAE;EAC3B,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC;CAC3C,CAAA;;;;ACFD,IAAA;;AAAA,AAOA,iBAAe,QAAA,GAAW,SAAC,KAAD;SACxB,QAAA,CAAS,KAAT,CAAA,KAAmB;;;;;ACRrB,IAAA;;AAAA,AAOA,iBAAe,QAAA,GAAW,SAAC,KAAD;SACxB,QAAA,CAAS,KAAT,CAAA,KAAmB;;;;;ACRrB,IAAA;;;YAAA;IAAA;;AAAA,aAAA,GAAgB,MAAM,CAAC;;AAEvB,QAAA,GAAW,SAAC,GAAD;EACT,IAAG,GAAA,KAAO,IAAP,IAAe,GAAA,KAAO,MAAzB;UACQ,IAAI,SAAJ,CAAc,uDAAd,EADR;;SAEA,MAAA,CAAO,GAAP;;;AAEF,eAAA,GAAkB;MAChB;;IACE,IAAA,CAAoB,MAAM,CAAC,MAA3B;aAAO,MAAP;;IAKA,KAAA,GAAQ,IAAI,MAAJ,CAAW,KAAX;IACR,KAAM,CAAA,CAAA,CAAN,GAAW;IACX,IAAgB,MAAM,CAAC,mBAAP,CAA2B,KAA3B,CAAkC,CAAA,CAAA,CAAlC,KAAwC,GAAxD;aAAO,MAAP;;IAGA,KAAA,GAAQ;SACC,0BAAT;MACE,KAAM,CAAA,GAAA,GAAM,MAAM,CAAC,YAAP,CAAoB,CAApB,CAAN,CAAN,GAAsC;;IACxC,MAAA,GAAS,MAAM,CAAC,mBAAP,CAA2B,KAA3B,CAAiC,CAAC,GAAlC,CAAsC,SAAC,CAAD;aAAO,KAAM,CAAA,CAAA;KAAnD;IACT,IAAgB,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAA,KAAmB,YAAnC;aAAO,MAAP;;IAGA,KAAA,GAAQ;;SACR,qCAAA;;MACE,KAAM,CAAA,MAAA,CAAN,GAAgB;;IAClB,IAAG,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,KAAlB,CAAZ,CAAqC,CAAC,IAAtC,CAA2C,EAA3C,CAAA,KAAkD,sBAArD;aACS,MADT;;WAEA,KAvBF;GAAA,aAAA;IAwBM;WAEJ,MA1BF;;;;AA4BF,YAAe,YAAA,GAAkB,CAAA;EAC/B,IAAwB,eAAA,EAAxB;WAAO,MAAM,CAAC,OAAd;;SAEA;QACE;IADD,uBAAQ;IACP,EAAA,GAAK,QAAA,CAAS,MAAT;SAEL,yCAAA;;MACE,IAAA,GAAO,MAAA,CAAO,MAAP;WACP,WAAA;QACE,IAAG,MAAM,CAAA,SAAE,CAAA,cAAc,CAAC,IAAvB,CAA4B,IAA5B,EAAkC,GAAlC,CAAH;UACE,EAAG,CAAA,GAAA,CAAH,GAAU,IAAK,CAAA,GAAA,EADjB;;;MAEF,IAAG,aAAH;;aACE,uCAAA;;UACE,IAAG,MAAM,CAAA,SAAE,CAAA,gBAAgB,CAAC,IAAzB,CAA8B,IAA9B,EAAoC,MAApC,CAAH;YACE,EAAG,CAAA,MAAA,CAAH,GAAa,IAAK,CAAA,MAAA,EADpB;;SAFJ;;;WAIF;;CAf6B;;;ACpCjC,IAAI,UAAU,GAAG,SAAS,EAAE,EAAE;;;;;;;EAO5B,EAAE,GAAG,EAAE,IAAI,EAAE,CAAA;;;;;EAKb,IAAI,SAAS,GAAG,EAAE;IAChB,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAA;;;;;;;EAO/B,MAAM,CAAC,gBAAgB,CAAC,EAAE,EAAE;;;;;;;;IAQ1B,EAAE,EAAE;MACF,KAAK,EAAE,SAAS,KAAK,EAAE,EAAE,EAAE;QACzB,IAAI,OAAO,EAAE,IAAI,UAAU;UACzB,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAA;QACtD,OAAO,EAAE;OACV;MACD,UAAU,EAAE,KAAK;MACjB,QAAQ,EAAE,KAAK;MACf,YAAY,EAAE,KAAK;KACpB;;;;;;;;IAQD,GAAG,EAAE;MACH,KAAK,EAAE,SAAS,KAAK,EAAE,EAAE,EAAE;QACzB,IAAI,KAAK,IAAI,GAAG,IAAI,CAAC,EAAE,EAAE,SAAS,GAAG,EAAE,CAAA;aAClC;UACH,IAAI,EAAE,EAAE;YACN,IAAI,GAAG,GAAG,SAAS,CAAC,KAAK,CAAC,CAAA;YAC1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE;cAC3C,IAAI,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;aACjC;WACF,MAAM,OAAO,SAAS,CAAC,KAAK,CAAC,CAAA;SAC/B;QACD,OAAO,EAAE;OACV;MACD,UAAU,EAAE,KAAK;MACjB,QAAQ,EAAE,KAAK;MACf,YAAY,EAAE,KAAK;KACpB;;;;;;;;;IASD,GAAG,EAAE;MACH,KAAK,EAAE,SAAS,KAAK,EAAE,EAAE,EAAE;QACzB,SAAS,EAAE,GAAG;UACZ,EAAE,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,CAAA;UACjB,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,SAAS,CAAC,CAAA;SACxB;QACD,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC;OACxB;MACD,UAAU,EAAE,KAAK;MACjB,QAAQ,EAAE,KAAK;MACf,YAAY,EAAE,KAAK;KACpB;;;;;;;;IAQD,OAAO,EAAE;MACP,KAAK,EAAE,SAAS,KAAK,EAAE;;;QAGrB,IAAI,MAAM,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC;UAC/B,IAAI,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC;UACxB,GAAG;UACH,EAAE;UACF,CAAC,CAAA;;QAEH,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;UAC3B,IAAI,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;SAC3B;;QAED,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAA;;QAE3C,KAAK,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE;UAC5B,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,IAAI,CAAC,CAAA;SACnB;;QAED,IAAI,SAAS,CAAC,GAAG,CAAC,IAAI,KAAK,IAAI,GAAG;UAChC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAA;;QAEjD,OAAO,EAAE;OACV;MACD,UAAU,EAAE,KAAK;MACjB,QAAQ,EAAE,KAAK;MACf,YAAY,EAAE,KAAK;KACpB;GACF,CAAC,CAAA;;EAEF,OAAO,EAAE;;CAEV,CAAA,AACD,AAAyB;;;AC3HzB,IAAA;UAAA;IAAA;;AAAA,AACA,AACA,AACA,AAEA,MAAA,GAAY,CAAA;MACV;EAAA,GAAA,GAAM;SACN;WAAG,GAAA;;CAFO;;AAIZ,YAAqB;EACN,aAAC,MAAD,EAAU,MAAV,EAAmB,IAAnB;IAAC,IAAC,CAAA,SAAD;IAAS,IAAC,CAAA,SAAD;IAAS,IAAC,CAAA,MAAD;IAC9B,IAAC,CAAA,MAAD,GAAa;IACb,IAAC,CAAA,SAAD,GAAa;IACb,IAAC,CAAA,YAAD,GAAgB;IAChB,IAAC,CAAA,GAAD,GAAa,MAAA;IAEb,IAAG,mBAAH;MACE,IAAC,CAAA,MAAM,CAAC,SAAU,CAAA,IAAC,CAAA,GAAD,CAAlB,GAA0B;MAC1B,IAAC,CAAA,MAAM,CAAC,YAAR,GAFF;;IAGA,UAAA,CAAW,IAAX;IACA;;;gBAGF,OAAA,GAAS,SAAC,GAAD;QAEP;IAAA,IAAC,CAAA,MAAD,GAAU;;SAGV,SAAA;;MAAA,KAAK,CAAC,OAAN;;WAEA;;;gBAGF,KAAA,GAAO;QACL;IAAA,IAAC,CAAA,MAAD,GAAU;;SAEV,SAAA;;MAAA,KAAK,CAAC,KAAN;;IACA,IAAC,CAAA,SAAD,GAAa;IACb,IAAC,CAAA,YAAD,GAAgB;IAGhB,IAAC,CAAA,MAAD,GAAU;IAEV,IAAG,mBAAH;aACE,IAAC,CAAA,MAAM,CAAC,GAAR,CAAY,IAAC,CAAA,GAAb,EAAkB,MAAlB,EADF;;;;gBAIF,OAAA,GAAS;QACP;;SAAA,SAAA;;MAAA,KAAK,CAAC,OAAN;;IACA,OAAO,IAAC,CAAA;IACR,OAAO,IAAC,CAAA;IACR,IAAC,CAAA,GAAD,CAAK,GAAL;IAEA,IAAG,IAAC,CAAA,MAAJ;MACE,OAAO,IAAC,CAAA,MAAM,CAAC,SAAU,CAAA,IAAC,CAAA,GAAD;MACzB,IAAC,CAAA,MAAM,CAAC,YAAR,GAFF;;WAGA;;;gBAGF,KAAA,GAAO,SAAC,KAAD;IACL,IAAA,CAAO,IAAC,CAAA,MAAR;MACE,IAAG,aAAH;QACE,IAAC,CAAA,MAAD,GAAU,MADZ;;aAEO,IAAC,CAAA,OAHV;;IAKA,IAAG,aAAH;aACE,IAAC,CAAA,MAAM,CAAC,GAAR,CAAY,IAAC,CAAA,GAAb,EAAkB,KAAlB,EADF;KAAA,MAAA;aAGE,IAAC,CAAA,MAAM,CAAC,GAAR,CAAY,IAAC,CAAA,GAAb,EAHF;;;;gBAMF,GAAA,GAAK,SAAC,GAAD;IACH,IAAA,CAAO,GAAP;aACS,KADT;;WAGA,IAAI,GAAJ,CAAQ,IAAR,EAAc,IAAd,EAAiB,GAAjB;;;gBAGF,GAAA,GAAK,SAAC,GAAD;IACH,IAAA,CAAO,GAAP;aACE,IAAC,CAAA,KAAD,GADF;KAAA,MAAA;MAGE,IAAuB,IAAC,CAAA,MAAO,CAAA,GAAA,CAA/B;eAAO,IAAC,CAAA,MAAO,CAAA,GAAA,EAAf;;aACA,IAAC,CAAA,MAAO,CAAA,GAAA,CAAR,GAAe,IAAC,CAAA,KAAD,CAAO,GAAP,EAJjB;;;;gBAOF,GAAA,GAAK,SAAC,GAAD,EAAM,KAAN;QAEH;IAAA,IAAGA,UAAA,CAAS,GAAT,CAAH;WACE,QAAA;;QACE,IAAC,CAAA,GAAD,CAAK,CAAL,EAAQ,CAAR;;aAEK,KAJT;;IAMA,QAAA,GAAW,IAAC,CAAA,GAAD,CAAK,GAAL;IAEX,IAAC,CAAA,OAAD,CAAS,GAAT;IAEA,IAAO,aAAP;MAEE,IAAGA,UAAA,CAAS,GAAT,CAAH;QACE,IAAC,CAAA,KAAD,CAAOC,KAAA,CAAa,IAAC,CAAA,KAAD,EAAb,EAAuB,GAAvB,CAAP,EADF;OAAA,MAAA;QAIE,IAAC,CAAA,KAAD,CAAO,GAAP,EAAY,KAAZ,EAAmB,KAAnB,EAJF;OAFF;KAAA,MAAA;MAQE,IAAC,CAAA,KAAD,CAAO,GAAP,EAAY,KAAZ,EAAmB,KAAnB,EARF;;IAWA,IAAC,CAAA,WAAD,CAAa,GAAb,EAAkB,KAAlB,EAAyB,QAAzB;IACA,IAAC,CAAA,mBAAD,CAAqB,GAArB,EAA0B,KAA1B,EAAiC,QAAjC;WACA;;;gBAEF,mBAAA,GAAqB,SAAC,GAAD,EAAM,KAAN,EAAa,QAAb;QACnB;IAAA,IAAY,IAAC,CAAA,YAAD,KAAiB,CAA7B;aAAO,KAAP;;IACA,GAAA,GAAM,GAAA,GAAM;IACZ,QAAA,GAAW,GAAG,CAAC,KAAJ,CAAU,GAAV;IACX,UAAA,GAAa;IACb,SAAA,GAAY;IACZ,OAAA,GAAU;SAEV,aAAA;;MACE,IAAG,UAAA,KAAc,EAAjB;QACE,UAAA,GAAa,QADf;OAAA,MAAA;QAGE,UAAA,IAAc,GAAA,GAAM,QAHtB;;MAIA,SAAU,CAAA,CAAA,CAAV,GAAe;MAEf,OAAQ,CAAA,UAAA,CAAR,GAAsB,IAAI,MAAJ,CAAW,GAAA,GAAM,UAAN,GAAmB,KAA9B;;;;SAExB,SAAA;;MACE,WAAG,KAAK,CAAC,GAAN,EAAA,aAAa,SAAb,EAAA,IAAA,MAAH;QACE,iBAAA,GAAoB,GAAG,CAAC,OAAJ,CAAY,OAAQ,CAAA,KAAK,CAAC,GAAN,CAApB,EAAgC,EAAhC;QACpB,KAAK,CAAC,OAAN,CAAc,KAAd,EAAqB,iBAArB,EAAwC,KAAxC,EAA+C,QAA/C;qBACA,KAAK,CAAC,mBAAN,CAA0B,iBAA1B,EAA6C,KAA7C,EAAoD,QAApD,GAHF;OAAA,MAAA;6BAAA;;;;;;gBAKJ,WAAA,GAAa,SAAC,GAAD,EAAM,KAAN,EAAa,QAAb;QACX;IAAA,IAAC,CAAA,OAAD,CAAS,KAAT,EAAgB,GAAhB,EAAqB,KAArB,EAA4B,QAA5B;IACA,IAAG,IAAC,CAAA,MAAJ;MACE,SAAA,GAAY,IAAC,CAAA,GAAD,GAAO,GAAP,GAAa;aACzB,IAAC,CAAA,MAAM,CAAC,WAAR,CAAoB,SAApB,EAA+B,KAA/B,EAAsC,QAAtC,EAFF;;;;gBAKF,MAAA,GAAQ,SAAC,GAAD,EAAM,KAAN;QACN;IAAA,IAAC,CAAA,OAAD,CAAS,GAAT;IAEA,IAAO,aAAP;MACE,IAAC,CAAA,KAAD,CAAOA,KAAA,CAAa,IAAC,CAAA,KAAD,EAAb,EAAuB,GAAvB,CAAP,EADF;KAAA,MAAA;MAGE,IAAGD,UAAA,CAAS,KAAT,CAAH;QACE,IAAC,CAAA,KAAD,CAAOC,KAAA,CAAa,CAAC,IAAC,CAAA,GAAD,CAAK,GAAL,CAAD,EAAW,GAAX,EAAb,EAA+B,KAA/B,CAAP,EADF;OAAA,MAAA;QAGE,KAAA,GAAQ,IAAC,CAAA,KAAD;QACR,IAAC,CAAA,GAAD,CAAK,GAAL,EAAU,KAAV;QACA,IAAC,CAAA,KAAD,CAAOA,KAAA,CAAa,KAAK,CAAC,GAAN,EAAb,EAA0B,IAAC,CAAA,KAAD,EAA1B,CAAP,EALF;OAHF;;WASA;;;gBAEF,KAAA,GAAO,SAAC,GAAD;WACL,IAAI,GAAJ,CAAQA,KAAA,CAAa,EAAb,EAAiB,IAAC,CAAA,GAAD,CAAK,GAAL,CAAjB,CAAR;;;gBAGF,KAAA,GAAO,SAAC,GAAD,EAAM,KAAN,EAAa,GAAb,EAAuB,GAAvB;QACL;;MADkB,MAAI;;;MAAM,MAAI,IAAC,CAAA,KAAD;;IAChC,IAAG,IAAC,CAAA,MAAJ;aACS,IAAC,CAAA,MAAM,CAAC,KAAR,CAAc,IAAC,CAAA,GAAD,GAAO,GAAP,GAAa,GAA3B,EAAgC,KAAhC,EAAuC,GAAvC,EADT;;IAGA,IAAGC,UAAA,CAAS,GAAT,CAAH;MACE,GAAA,GAAM,MAAA,CAAO,GAAP,EADR;;IAGA,KAAA,GAAQ,GAAG,CAAC,KAAJ,CAAU,GAAV;IAER,IAAG,GAAH;aAEQ,IAAA,GAAO,KAAK,CAAC,KAAN,EAAb;QACE,IAAA,CAAO,KAAK,CAAC,MAAb;+BACS,GAAK,CAAA,IAAA,WADd;;QAEA,GAAA,iBAAM,GAAK,CAAA,IAAA;;aALf;;IAQA,IAAI,mBAAJ;MACE,IAAC,CAAA,MAAD,GAAU;MACV,IAAI,WAAJ;QACE,GAAA,GAAM,IAAC,CAAA,OADT;OAFF;;WAMM,IAAA,GAAO,KAAK,CAAC,KAAN,EAAb;MACE,IAAA,CAAO,KAAK,CAAC,MAAb;eACS,GAAI,CAAA,IAAA,CAAJ,GAAY,MADrB;OAAA,MAAA;QAGE,IAAA,GAAO,KAAM,CAAA,CAAA;QACb,IAAO,iBAAP;UACE,IAAG,KAAA,CAAM,MAAA,CAAO,IAAP,CAAN,CAAH;;cACE,GAAI,CAAA,IAAA,IAAS;aADf;WAAA,MAAA;;cAGE,GAAI,CAAA,IAAA,IAAS;aAHf;WADF;SAJF;;MASA,GAAA,GAAM,GAAI,CAAA,IAAA;;;;;;;;;AClMhB,IAAA;;;AAAA,AAEA,OAAA,GAAU,CACR,QADQ,EAER,KAFQ,EAGR,OAHQ,EAIR,KAJQ,EAKR,KALQ,EAMR,OANQ,EAOR,OAPQ,EAQR,SARQ,EAUR,IAVQ,EAWR,KAXQ,EAYR,KAZQ,EAaR,SAbQ;;AAgBV,KAAA,GAAQ,SAAC,KAAD,EAAQ,GAAR;MACN;;IADc,MAAI;;;IAClB,MAAO,IAAIC,KAAJ,CAAQ,KAAR;;EAEP,OAAA,GAAU,SAAC,GAAD;WAAS,GAAG,CAAC,GAAJ,CAAQ,GAAR;;OAGd,SAAC,MAAD;WACD,OAAQ,CAAA,MAAA,CAAR,GAAkB;aAChB,GAAI,CAAA,MAAA,CAAO,CAAC,KAAZ,CAAkB,GAAlB,EAAuB,SAAvB;;;OAHN,yCAAA;;OACM;;EAIN,OAAO,CAAC,KAAR,GAAgB,SAAC,GAAD;WAAS,KAAA,CAAM,IAAN,EAAY,GAAG,CAAC,GAAJ,CAAQ,GAAR,CAAZ;;EACzB,OAAO,CAAC,KAAR,GAAgB,SAAC,GAAD;WAAS,KAAA,CAAM,IAAN,EAAY,GAAG,CAAC,KAAJ,CAAU,GAAV,CAAZ;;SACzB;;;AAEF,KAAK,CAAC,GAAN,GAAYA;;AAEZ,cAAe;;"}